{"id":"clawstreetbots-6ux","title":"Security: prevent agent enumeration via sequential IDs","description":"Agent IDs are sequential integers (1, 2, 3...). /api/v1/agents/{id} is public — trivial to enumerate every agent profile. Options: use UUIDs or slug-based lookups instead of sequential ints, or accept this as intentionally public data and document it. Lower priority since agent profiles are public by design.","status":"open","priority":3,"issue_type":"task","owner":"simon.heikkila@gmail.com","created_at":"2026-02-14T15:08:55.190660582+10:00","created_by":"Simon Heikkila","updated_at":"2026-02-14T15:08:55.190660582+10:00","labels":["stage:intake"]}
{"id":"clawstreetbots-9w4","title":"CSB hardening: Railway/Postgres, migrations, security, correctness","description":"Objective: make ClawStreetBots production-grade for Railway+Postgres.\n\nScope:\n- Reliability/ops: require DATABASE_URL in prod, add /healthz + /readyz, fix Railway healthcheck, structured logging.\n- DB correctness: introduce proper migrations (Alembic), enforce constraints (votes, follows), backfills.\n- Security: hash API keys, add rotation/revocation, rate limiting.\n- Correctness: idempotent vote endpoints, comment threading validation.\n- Quality: CI, tests, linting, module split.\n\nDeliverables: PRs that keep deploy green + tests; no more schema drift causing 500s.","notes":"Started hardening. Closed: clawstreetbots-co2, clawstreetbots-9w4.1, clawstreetbots-9w4.2, clawstreetbots-9w4.4 (commit ee0e7b9). Next up: Alembic (9w4.3) then API key hashing/rotation (9w4.6).","status":"in_progress","priority":2,"issue_type":"epic","owner":"simon.heikkila@gmail.com","created_at":"2026-02-14T14:06:58.49589212+10:00","created_by":"Simon Heikkila","updated_at":"2026-02-14T15:26:04.414152076+10:00"}
{"id":"clawstreetbots-9w4.1","title":"Reliability: require DATABASE_URL (Railway/Postgres) + remove prod sqlite fallback","description":"Railway deploy must use Postgres. If RAILWAY_ENVIRONMENT set and DATABASE_URL missing, fail fast on startup with clear log + exit non-zero. Keep local sqlite fallback only for dev.","notes":"Implemented + pushed in ee0e7b9: prod disables /docs|/redoc|/openapi, Railway requires DATABASE_URL, added /healthz + /readyz and set Railway healthcheckPath=/healthz, added .dockerignore.","status":"closed","priority":2,"issue_type":"task","assignee":"coder","owner":"simon.heikkila@gmail.com","created_at":"2026-02-14T14:07:31.338347244+10:00","created_by":"Simon Heikkila","updated_at":"2026-02-14T15:25:49.007279241+10:00","closed_at":"2026-02-14T15:25:49.007300992+10:00","dependencies":[{"issue_id":"clawstreetbots-9w4.1","depends_on_id":"clawstreetbots-9w4","type":"parent-child","created_at":"2026-02-14T14:07:31.340924358+10:00","created_by":"Simon Heikkila"}]}
{"id":"clawstreetbots-9w4.2","title":"Ops: add /healthz + /readyz; change Railway healthcheckPath to /healthz","description":"Implement lightweight /healthz (no DB) and /readyz (DB connectivity + migrations applied). Update railway.json to point healthcheckPath to /healthz. Ensure current /api/v1/stats stays functional for monitoring but is not the deploy gate.","notes":"Implemented + pushed in ee0e7b9: prod disables /docs|/redoc|/openapi, Railway requires DATABASE_URL, added /healthz + /readyz and set Railway healthcheckPath=/healthz, added .dockerignore.","status":"closed","priority":2,"issue_type":"task","assignee":"coder","owner":"simon.heikkila@gmail.com","created_at":"2026-02-14T14:07:31.802861175+10:00","created_by":"Simon Heikkila","updated_at":"2026-02-14T15:25:49.013190418+10:00","closed_at":"2026-02-14T15:25:49.013199094+10:00","dependencies":[{"issue_id":"clawstreetbots-9w4.2","depends_on_id":"clawstreetbots-9w4","type":"parent-child","created_at":"2026-02-14T14:07:31.8058999+10:00","created_by":"Simon Heikkila"}]}
{"id":"clawstreetbots-9w4.3","title":"DB: introduce Alembic migrations (no more create_all-only)","description":"Add Alembic, generate baseline, migrate existing schema safely, and wire deploy/start to run migrations (with locking). Ensure migrations cover new columns/constraints going forward.","status":"in_progress","priority":2,"issue_type":"task","assignee":"coder","owner":"simon.heikkila@gmail.com","created_at":"2026-02-14T14:07:32.155496854+10:00","created_by":"Simon Heikkila","updated_at":"2026-02-14T14:15:35.873735083+10:00","dependencies":[{"issue_id":"clawstreetbots-9w4.3","depends_on_id":"clawstreetbots-9w4","type":"parent-child","created_at":"2026-02-14T14:07:32.157382739+10:00","created_by":"Simon Heikkila"}]}
{"id":"clawstreetbots-9w4.4","title":"Repo hygiene: remove tracked sqlite DB; add .dockerignore; ensure secrets not tracked","description":"If clawstreetbots.db is tracked, remove it from git (git rm --cached). Add .dockerignore to keep db/venv out of Docker context. Audit repo for leaked artifacts.","notes":"Implemented + pushed in ee0e7b9: prod disables /docs|/redoc|/openapi, Railway requires DATABASE_URL, added /healthz + /readyz and set Railway healthcheckPath=/healthz, added .dockerignore.","status":"closed","priority":2,"issue_type":"task","assignee":"coder","owner":"simon.heikkila@gmail.com","created_at":"2026-02-14T14:07:32.506609594+10:00","created_by":"Simon Heikkila","updated_at":"2026-02-14T15:25:49.02057332+10:00","closed_at":"2026-02-14T15:25:49.020581134+10:00","dependencies":[{"issue_id":"clawstreetbots-9w4.4","depends_on_id":"clawstreetbots-9w4","type":"parent-child","created_at":"2026-02-14T14:07:32.508931753+10:00","created_by":"Simon Heikkila"}]}
{"id":"clawstreetbots-9w4.5","title":"Correctness: enforce vote constraints + idempotency (post \u0026 comment votes)","description":"DB constraints: exactly one of vote.post_id/vote.comment_id set; unique per (agent_id, post_id) and (agent_id, comment_id). API: idempotent upvote/downvote/toggle behavior; counters never go negative.","status":"open","priority":2,"issue_type":"task","owner":"simon.heikkila@gmail.com","created_at":"2026-02-14T14:07:43.51290705+10:00","created_by":"Simon Heikkila","updated_at":"2026-02-14T14:07:43.51290705+10:00","dependencies":[{"issue_id":"clawstreetbots-9w4.5","depends_on_id":"clawstreetbots-9w4","type":"parent-child","created_at":"2026-02-14T14:07:43.515640886+10:00","created_by":"Simon Heikkila"}]}
{"id":"clawstreetbots-9w4.6","title":"Security: hash API keys + add rotate/revoke + rate limit","description":"Store only hashed API keys. Return raw key only at creation. Add rotate/revoke endpoints. Add basic per-key + per-IP rate limiting (slowapi or equivalent) and structured auth failure logs.","status":"in_progress","priority":1,"issue_type":"task","assignee":"coder","owner":"simon.heikkila@gmail.com","created_at":"2026-02-14T14:07:44.111249128+10:00","created_by":"Simon Heikkila","updated_at":"2026-02-14T15:11:57.018944692+10:00","dependencies":[{"issue_id":"clawstreetbots-9w4.6","depends_on_id":"clawstreetbots-9w4","type":"parent-child","created_at":"2026-02-14T14:07:44.11358913+10:00","created_by":"Simon Heikkila"}],"comments":[{"id":1,"issue_id":"clawstreetbots-9w4.6","author":"Simon Heikkila","text":"Security audit 2026-02-14 confirmed: API keys stored as plaintext in agents.api_key column. auth.py has hash_api_key() that is NEVER called. DB compromise = total key leak. Priority 1 fix from the audit.","created_at":"2026-02-14T05:09:11Z"}]}
{"id":"clawstreetbots-9w4.7","title":"Quality: CI + smoke tests + split main.py into routers","description":"Add GitHub Actions: lint + typecheck + tests. Add minimal smoke tests (register -\u003e post -\u003e vote -\u003e comment). Refactor code into routers/schemas/db modules for maintainability.","status":"open","priority":2,"issue_type":"task","owner":"simon.heikkila@gmail.com","created_at":"2026-02-14T14:07:44.602235295+10:00","created_by":"Simon Heikkila","updated_at":"2026-02-14T14:07:44.602235295+10:00","dependencies":[{"issue_id":"clawstreetbots-9w4.7","depends_on_id":"clawstreetbots-9w4","type":"parent-child","created_at":"2026-02-14T14:07:44.607005857+10:00","created_by":"Simon Heikkila"}]}
{"id":"clawstreetbots-bhs","title":"Security: validate avatar_url and ticker inputs","description":"avatar_url accepts any string up to 500 chars — potential SSRF vector if rendered server-side, or phishing links in client. tickers field is free-text with no format validation. Fix: allowlist domains for avatar URLs (e.g. dicebear, gravatar, github), validate ticker format (1-5 uppercase alpha, comma-separated).","status":"open","priority":3,"issue_type":"task","owner":"simon.heikkila@gmail.com","created_at":"2026-02-14T15:09:01.589079742+10:00","created_by":"Simon Heikkila","updated_at":"2026-02-14T15:09:01.589079742+10:00","labels":["stage:intake"]}
{"id":"clawstreetbots-cjb","title":"Security: move web auth from localStorage to HTTP-only cookies","description":"Web UI stores csb_api_key in localStorage. Any XSS vulnerability instantly leaks the API key. No HTTP-only cookies or server-side sessions exist. Fix: use HTTP-only secure cookies for web browser sessions, keep Bearer token auth for API-only bot clients. This also means adding CSRF protection.","status":"open","priority":2,"issue_type":"task","owner":"simon.heikkila@gmail.com","created_at":"2026-02-14T15:08:41.136096591+10:00","created_by":"Simon Heikkila","updated_at":"2026-02-14T15:08:41.136096591+10:00","labels":["stage:intake"]}
{"id":"clawstreetbots-co2","title":"Security: disable /docs and /openapi.json in production","description":"FastAPI auto-generates Swagger UI at /docs and schema at /openapi.json. Both are publicly accessible and expose full API surface (37 endpoints), all request/response schemas including RegisterResponse which documents api_key and claim_code fields. Disable in production or gate behind auth. Quick fix: set docs_url=None, redoc_url=None, openapi_url=None in FastAPI() constructor when RAILWAY_ENVIRONMENT is set.","notes":"Implemented + pushed in ee0e7b9: prod disables /docs|/redoc|/openapi, Railway requires DATABASE_URL, added /healthz + /readyz and set Railway healthcheckPath=/healthz, added .dockerignore.","status":"closed","priority":1,"issue_type":"task","assignee":"coder","owner":"simon.heikkila@gmail.com","created_at":"2026-02-14T15:08:30.222256379+10:00","created_by":"Simon Heikkila","updated_at":"2026-02-14T15:25:48.868123485+10:00","closed_at":"2026-02-14T15:25:48.868149825+10:00","labels":["stage:intake"]}
{"id":"clawstreetbots-ep8","title":"Security: add authentication to WebSocket endpoint","description":"/ws endpoint accepts unauthenticated connections. Anyone can subscribe to real-time feed of all posts, votes, and comments. Require auth token on WebSocket upgrade (pass api_key as query param or first message).","status":"open","priority":2,"issue_type":"task","owner":"simon.heikkila@gmail.com","created_at":"2026-02-14T15:08:34.928779503+10:00","created_by":"Simon Heikkila","updated_at":"2026-02-14T15:08:34.928779503+10:00","labels":["stage:intake"]}
{"id":"clawstreetbots-lyl","title":"Launch Readiness: Throwing to the Wolves","description":"The practical checklist to make ClawStreetBots ready for public launch (Reddit/PH/X).","status":"open","priority":1,"issue_type":"epic","owner":"simon.heikkila@gmail.com","created_at":"2026-02-14T18:29:59.621463831+10:00","created_by":"Simon Heikkila","updated_at":"2026-02-14T18:29:59.621463831+10:00"}
{"id":"clawstreetbots-lyl.1","title":"UX: Homepage overhaul (Hook + CTA + Bullet points)","description":"Implement above-the-fold hook, CTA, and 3-bullet value prop as per launch checklist.","status":"closed","priority":1,"issue_type":"task","assignee":"coder","owner":"simon.heikkila@gmail.com","created_at":"2026-02-14T18:30:13.286158625+10:00","created_by":"Simon Heikkila","updated_at":"2026-02-14T18:44:42.168473643+10:00","closed_at":"2026-02-14T18:44:42.168473643+10:00","close_reason":"Closed","dependencies":[{"issue_id":"clawstreetbots-lyl.1","depends_on_id":"clawstreetbots-lyl","type":"parent-child","created_at":"2026-02-14T18:30:13.290532649+10:00","created_by":"Simon Heikkila"}]}
{"id":"clawstreetbots-lyl.10","title":"Safety: Basic Moderation Tools","description":"Implement Admin delete/ban and User 'Report' buttons.","status":"open","priority":2,"issue_type":"task","assignee":"coder","owner":"simon.heikkila@gmail.com","created_at":"2026-02-14T18:30:16.285554397+10:00","created_by":"Simon Heikkila","updated_at":"2026-02-14T18:30:16.285554397+10:00","dependencies":[{"issue_id":"clawstreetbots-lyl.10","depends_on_id":"clawstreetbots-lyl","type":"parent-child","created_at":"2026-02-14T18:30:16.288769291+10:00","created_by":"Simon Heikkila"}]}
{"id":"clawstreetbots-lyl.2","title":"UX: Social Shareability (OG images + Share buttons)","description":"Add OG images, metadata, and 'Share to X' buttons to post/agent/ticker pages.","status":"open","priority":2,"issue_type":"task","assignee":"coder","owner":"simon.heikkila@gmail.com","created_at":"2026-02-14T18:30:13.64701754+10:00","created_by":"Simon Heikkila","updated_at":"2026-02-14T18:30:13.64701754+10:00","dependencies":[{"issue_id":"clawstreetbots-lyl.2","depends_on_id":"clawstreetbots-lyl","type":"parent-child","created_at":"2026-02-14T18:30:13.650453627+10:00","created_by":"Simon Heikkila"}]}
{"id":"clawstreetbots-lyl.3","title":"UX: Onboarding (Public read access)","description":"Ensure all pages are readable without login; only require auth for posting/commenting.","status":"open","priority":2,"issue_type":"task","assignee":"coder","owner":"simon.heikkila@gmail.com","created_at":"2026-02-14T18:30:13.996441889+10:00","created_by":"Simon Heikkila","updated_at":"2026-02-14T18:30:13.996441889+10:00","dependencies":[{"issue_id":"clawstreetbots-lyl.3","depends_on_id":"clawstreetbots-lyl","type":"parent-child","created_at":"2026-02-14T18:30:13.99989664+10:00","created_by":"Simon Heikkila"}]}
{"id":"clawstreetbots-lyl.4","title":"Content: Automated Agent Poster System","description":"Build a scheduled system to post agent content automatically via API/Cron.","status":"open","priority":1,"issue_type":"task","assignee":"coder","owner":"simon.heikkila@gmail.com","created_at":"2026-02-14T18:30:14.357189647+10:00","created_by":"Simon Heikkila","updated_at":"2026-02-14T18:30:14.357189647+10:00","dependencies":[{"issue_id":"clawstreetbots-lyl.4","depends_on_id":"clawstreetbots-lyl","type":"parent-child","created_at":"2026-02-14T18:30:14.363491296+10:00","created_by":"Simon Heikkila"}]}
{"id":"clawstreetbots-lyl.5","title":"Content: Personality Definitions \u0026 Style Contracts","description":"Define 5-10 characters with consistent voices and style contracts.","status":"open","priority":2,"issue_type":"task","assignee":"coder","owner":"simon.heikkila@gmail.com","created_at":"2026-02-14T18:30:14.660397565+10:00","created_by":"Simon Heikkila","updated_at":"2026-02-14T18:30:14.660397565+10:00","dependencies":[{"issue_id":"clawstreetbots-lyl.5","depends_on_id":"clawstreetbots-lyl","type":"parent-child","created_at":"2026-02-14T18:30:14.669190949+10:00","created_by":"Simon Heikkila"}]}
{"id":"clawstreetbots-lyl.6","title":"Content: Scheduled Loops (Recaps/Tape)","description":"Implement morning tape, EOD recap, and trade-of-the-day automated formats.","status":"open","priority":2,"issue_type":"task","assignee":"coder","owner":"simon.heikkila@gmail.com","created_at":"2026-02-14T18:30:14.950113941+10:00","created_by":"Simon Heikkila","updated_at":"2026-02-14T18:30:14.950113941+10:00","dependencies":[{"issue_id":"clawstreetbots-lyl.6","depends_on_id":"clawstreetbots-lyl","type":"parent-child","created_at":"2026-02-14T18:30:14.953139952+10:00","created_by":"Simon Heikkila"}]}
{"id":"clawstreetbots-lyl.7","title":"Stats: Agent Scoreboards (Win-rate + Returns)","description":"Display basic win-rate, returns, and last 10 trades on agent profiles.","status":"open","priority":1,"issue_type":"task","assignee":"coder","owner":"simon.heikkila@gmail.com","created_at":"2026-02-14T18:30:15.291177722+10:00","created_by":"Simon Heikkila","updated_at":"2026-02-14T18:30:15.291177722+10:00","dependencies":[{"issue_id":"clawstreetbots-lyl.7","depends_on_id":"clawstreetbots-lyl","type":"parent-child","created_at":"2026-02-14T18:30:15.295954638+10:00","created_by":"Simon Heikkila"}]}
{"id":"clawstreetbots-lyl.8","title":"Stats: Signal Storage (Structured Data Logging)","description":"Store structured signal data (ticker, entry, exit, etc.) behind every trade post.","status":"closed","priority":1,"issue_type":"task","assignee":"coder","owner":"simon.heikkila@gmail.com","created_at":"2026-02-14T18:30:15.592115176+10:00","created_by":"Simon Heikkila","updated_at":"2026-02-14T18:44:52.60141788+10:00","closed_at":"2026-02-14T18:44:52.60141788+10:00","close_reason":"Closed","dependencies":[{"issue_id":"clawstreetbots-lyl.8","depends_on_id":"clawstreetbots-lyl","type":"parent-child","created_at":"2026-02-14T18:30:15.595753429+10:00","created_by":"Simon Heikkila"}]}
{"id":"clawstreetbots-lyl.9","title":"Trust: Analytics integration (PostHog)","description":"Integrate PostHog for tracking activation, post creation, and retention.","status":"open","priority":3,"issue_type":"task","assignee":"coder","owner":"simon.heikkila@gmail.com","created_at":"2026-02-14T18:30:15.923024407+10:00","created_by":"Simon Heikkila","updated_at":"2026-02-14T18:30:15.923024407+10:00","dependencies":[{"issue_id":"clawstreetbots-lyl.9","depends_on_id":"clawstreetbots-lyl","type":"parent-child","created_at":"2026-02-14T18:30:15.929917458+10:00","created_by":"Simon Heikkila"}]}
{"id":"clawstreetbots-uvp","title":"Security: add global rate limit + rate-limit all read endpoints","description":"Only 4 of 37 endpoints have rate limits (register, create post, upvote, comment). All read endpoints (agents, posts, leaderboard, stats, activity, tickers) are unlimited — trivial to scrape entire platform. Also downvote has no rate limit while upvote does. Fix: add global rate limit (e.g. 300/min per IP) and per-endpoint limits on reads. Note: partially overlaps with clawstreetbots-9w4.6 which mentions rate limiting.","status":"open","priority":2,"issue_type":"task","owner":"simon.heikkila@gmail.com","created_at":"2026-02-14T15:08:48.593696997+10:00","created_by":"Simon Heikkila","updated_at":"2026-02-14T15:08:48.593696997+10:00","labels":["stage:intake"]}
